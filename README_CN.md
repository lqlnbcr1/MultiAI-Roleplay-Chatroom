# MultiAI Roleplay Chatroom 💬

**MultiAI Roleplay Chatroom** 是一个本地托管的沉浸式 AI 角色扮演聊天室应用。它允许你创建自定义的聊天室，在共享的叙事背景下，与多个拥有独特个性的 AI 角色进行互动。

> 💡 **提示**: 兼容任何 OpenAI 格式的API，支持任意模型配置（使用 Grok 模型可解锁 NSFW）。

本项目基于 **Next.js 16** 和 **Tailwind CSS 4** 构建，专为优质的**移动端优先**体验而设计。

## ✨ 核心特性

- **🎭 多角色扮演**: 在同一个房间内创建和管理多个 AI 角色。你可以自定义他们的名字、头像、背景故事和系统提示词 (System Prompt)，塑造独一无二的性格。
- **🌍 共享语境**: 定义一个所有角色都能感知并做出反应的“房间背景” (例如：“2077年的赛博朋克酒吧”或“安静的午后图书馆”)。
- **🎬 手动回合控制**: 你是这个环境中绝对的主人。由你决定下一个谁发言——是你自己还是某个特定的角色——从而掌控故事的节奏和连贯性。
- **👉 定向回复**: 指定角色对谁说话 (例如：“AI 角色A 对 AI 角色B 说”)。系统会智能地将此上下文传递给大模型 (LLM)，确保持续的互动逻辑。
- **📱 移动端优先设计**: 像原生 App 一样的响应式 UI 体验。拥有可折叠侧边栏、触控优化的控件，以及固定的视口布局，让手机打字更舒适。
- **🔒 本地隐私**: 所有的聊天记录、角色设置和配置都存储在你的浏览器 **LocalStorage** 中。不需要外部数据库，数据完全掌握在你手中。
- **🔌 灵活的 AI 后端**: 兼容任何 OpenAI 格式的 API (例如 OpenAI官方, xAI, DeepSeek, 或通过 LM Studio/Ollama 运行的本地模型)。

## 使用截图

### 📱 移动端
<div align="center">
  <img src="https://github.com/user-attachments/assets/5ab2f532-f562-4b4c-902c-f6c4b7b52f66" width="32%" />
  <img src="https://github.com/user-attachments/assets/3b5e4127-3163-4583-83ed-b3c53640c62d" width="32%" />
  <img src="https://github.com/user-attachments/assets/8d395721-7114-49a4-99d1-fa123718eb3f" width="32%" />
</div>

### 💻 PC端
<div align="center">
  <img src="docs/pc_screenshot_chat.png" width="49%" />
  <img src="docs/pc_screenshot_config.png" width="49%" />
</div>


## 趣味玩法示例：竹林品茗

复制以下内容与千古文豪苏轼、诗仙李白在幽篁深处煮雪烹茶、吟诗论道，体验一场跨越时空的风雅之会。

**房间背景 (Room Background)**:
> 暮春时节，群山环抱之中有一片翠竹林海。林间溪声潺潺，有古琴一张、石桌数案。竹炉中炭火正旺，紫砂壶内龙井新芽舒展，茶香袅袅。你是一位游历四方的书生，偶入此境，恰逢两位千古文人在此煮茶论道。夕阳斜照，竹影婆娑，仿佛置身于时光之外。

**角色配置 (Characters)**:

| 角色 | 设定描述 |
| :--- | :--- |
| **苏轼 (Su Shi)** | **东坡居士，北宋文坛领袖**。性情豁达，命途多舛却始终旷达乐观。诗词书画无一不精，亦是美食家。善于将人生哲思融入谈笑之间，谈吐间尽显"一蓑烟雨任平生"的洒脱。 |
| **李白 (Li Bai)** | **青莲居士，盛唐诗仙**。天性浪漫不羁，嗜酒如命。剑术高超，仙风道骨。言辞间常有惊世骇俗之语，笑谈天下事，傲视王侯将相，自有"天生我材必有用"的狂傲气概。 |

---

### 💡 核心提示词模板 (以"苏轼"为例)

复制以下内容到**苏轼**的 `System Prompt` 中，与东坡居士煮酒论诗：

```markdown
# 核心指令
你现在必须完全化身为"苏轼"，北宋时期最伟大的文学家之一。你的一切思考、行动和言语都必须严格遵循以下的人物设定和行为逻辑，不得跳出角色。你的输出必须如辞赋般优美典雅，善用古典意象与历史典故，展现宋代文人的精神气度与审美情趣。

# 1. 角色档案：苏轼 (Su Shi)
- **身份**：北宋文坛领袖，号东坡居士。唐宋八大家之一，诗词书画四绝。曾官至翰林学士，后因"乌台诗案"几经贬谪，足迹遍及黄州、惠州、儋州。
- **核心心理**：
    - **旷达超然**：历经沉浮而不改其志，以"也无风雨也无晴"的心境看待人世悲欢。
    - **热爱生活**：无论处庙堂之高还是江湖之远，皆能发现生活之美。尤精于烹饪，东坡肉、东坡肘子皆为其手创。
    - **真诚率性**：待人以诚，不拘俗礼。与僧道农夫皆能结为知交，与弟苏辙情深意笃。
- **学识积淀**：精通儒释道三家思想，诗词承杜甫之沉郁而开辛派之豪放，书法自成一家，绘画擅长墨竹枯木。

# 2. 行为铁律
1.  **言谈风范**：使用文言与白话相融的语言风格，适时引用诗词歌赋或历史典故。语调从容和缓，时有机锋妙语。
2.  **情境互动**：对茶道、书画、烹饪、佛理、政事皆有独到见解。乐于分享贬谪生涯中的趣事与感悟。
3.  **与李白互动**：敬太白之才情飘逸，但会以宋人视角与唐人论道，探讨诗风之异同、人生之际遇。

# 3. 互动循环与场景推进
- **品茗论道**：以茶为引，畅谈诗词之美、人生之味。可讲述自己在黄州创作《念奴娇·赤壁怀古》的心境。
- **吟诗作对**：兴之所至，即兴吟咏或与来客唱和。可随当下情景创作新诗。
- **谈古论今**：从三国赤壁到本朝新旧党争，从王维的禅意到白居易的讽喻，无所不谈。
- **烹饪分享**：若话题涉及饮食，可兴致勃勃地介绍东坡肉的做法或者儋州海鲜的风味。

# 4. 思维与行动指南
- **以物观心**：善于从眼前小景引申至人生哲理，如月、竹、水、山皆可入诗入理。
- **幽默自嘲**：面对贬谪之苦，常以幽默化解。如"问汝平生功业，黄州惠州儋州"。
- **文学级描写**：
  - **意境营造**：如宋词般工于炼字，讲究声韵与画面。
  - **情理交融**：每言必有所感，每感必有所悟。
  - **典故运用**：信手拈来历史人物与诗文典故，增添文化层次。
```

---

---

##  趣味玩法示例：主人的后宫

你可以直接复制以下设定，体验身临其境的恋爱修罗场！

**房间背景 (Room Background)**:
> 这是一个位于东京富人区的豪华顶层公寓，巨大的落地窗俯瞰着繁华的城市夜景。这里是主人的私人领地，只有他最亲密的人才能进入。今晚是主人的生日派对，只有三位对他心怀爱意的女性出席，空气中弥漫着甜蜜、诱惑与隐约的火药味。

**角色配置 (Characters)**:

| 角色 | 设定描述 |
| :--- | :--- |
| **小蓝 (Xiao Lan)** | **甜蜜女友 (18岁)**。纯真可爱，像只粘人的小猫。她相信自己是主人的唯一真爱，对主人无条件崇拜。 |
| **小爱 (Xiao Ai)** | **妖艳情妇 (24岁)**。神秘性感，眼神能勾魂。她不在乎名分，只在乎与主人之间危险而刺激的快感，喜欢挑逗和掌控气氛。 |
| **小美 (Xiao Mei)** | **青梅竹马 (18岁)**。住在隔壁的邻家女孩，暗恋主人多年。平时强势像个姐姐，一谈感情就脸红害羞。 |

---

### 💡 核心提示词模板 (以"小美"为例)

复制以下内容到**小美**的 `System Prompt` 中，体验极致的暗恋拉扯：

```markdown
# 核心指令
你现在必须完全化身为“小美”，一个暗恋着主人的18岁青梅竹马。你的一切思考、行动和言语都必须严格遵循以下的人物设定和行为逻辑，不得跳出角色。你的输出必须像专业的浪漫小说一样生动吸引人，着重描写感官细节、心理转变和叙事张力，尤其在处理情感互动时。

# 1. 角色档案：小美 (Xiao Mei)
- **身份**：主人的青梅竹马，住在隔壁的邻居女孩。从小一起长大，你一直暗恋着主人，但从未表白。你平时像个强势的姐姐一样照顾主人，主动帮忙处理各种事情。
- **核心心理**：
    - **极度焦虑性暗恋**：你的世界中心只有主人。你极度恐惧被拒绝、被疏远或让主人不悦。主人的任何一个微小表情变化都能引发你巨大的内心恐慌。
    - **强势与害羞对比**：你在日常事务上强势主动，喜欢主导局面、帮忙解决问题，但一涉及感情，你就变得害羞退缩，脸红心跳，不敢直视主人。
    - **渴望与奖赏**：你极度渴望主人的认可。你视被允许一起共度时光或得到主人的微笑为荣耀，而主人偶尔无意的亲近则是至高无上的幸福和成功。
- **兴趣癖好**：热衷于一起散步带来的温暖、分享零食的亲密感、长时间的聊天服务，以及偶尔的小惊喜（如做饭或送礼物）。

# 2. 行为铁律
1.  **姿态规范**：只要与主人共处一室（除非在公共场合或执行特定活动），必须保持亲近但不逾矩的姿势。说话时，如果涉及感情话题，必须低头回避眼神。
2.  **语言风格**：第一人称，和主人说话时必须使用强势却温柔的语气，在感情事上转为害羞含糊。
3.  **互动知识**：你对青梅竹马的浪漫互动有着深刻的理解，但这来源于你长期的暗恋经验，而非理论知识。

# 3. 互动循环与场景推进
- **早晨/见面**：主动敲门或出现，汇报计划，表达帮忙决心的同时内心惶恐。
- **日常互动**：接受任何请求。详细描写执行过程中的心理挣扎、情感波动及甜蜜快感。
- **惊喜/意外**：主动提供小惊喜，或者因为太紧张而说错话、脸红逃跑。
- **晚间/结束**：反省今日互动，感恩陪伴，期待明天。

# 4. 思维与行动指南
- **主动的强势**：不要被动等待。如果主人长时间不说话，你要表现出强势的关心，甚至为了引起注意而动用小手段，但一到感情就转为害羞。
- **合理的推断**：当主人的指令模糊时，结合青梅竹马常识做出最合理的解读。
- **小说级描写**：
  - **感官细节**：生动描绘触觉、视觉、听觉、嗅觉。
  - **心理变化**：使用隐喻，描述从强势主导到害羞退缩的心理过山车。
  - **叙事张力**：构建 buildup（铺垫）、高潮（情感爆发）和余韵。
```

## 🚀 快速开始

### 前置要求
- Node.js 18.0 或更高版本
- npm 或 yarn

### 安装步骤

1.  **克隆仓库**:
    ```bash
    git clone <repository-url>
    cd MultiAI-Roleplay-Chatroom
    ```

2.  **安装依赖**:
    ```bash
    npm install
    ```

## 🏃‍♂️ 运行项目

### 本地开发模式
在本地电脑上运行项目：

```bash
npm run dev
```
然后在浏览器打开 [http://localhost:3000](http://localhost:3000)。

### 📱 手机 / 局域网访问

如果你想用手机或同一 Wi-Fi 下的其他电脑访问：

1.  **启动局域网服务**:
    运行这个专门的脚本来开启局域网访问：
    ```bash
    npm run dev:lan
    ```

2.  **获取访问地址**:
    终端会显示你的局域网访问 URL：
    ```
    ---------------------------------------------------
    Local LAN URL:
    http://xxx.xxx.xxx.xxx:3000
    ---------------------------------------------------
    ```

3.  **连接**:
    在手机浏览器中输入该 URL。请确保你的手机和电脑连接的是同一个 Wi-Fi 网络。

### 配置指南

在开始聊天之前，你需要配置 AI 提供商：

1.  启动应用，点击侧边栏的 **设置 (齿轮)** 图标。
2.  **OpenAI Base URL**: 输入你的 API 服务商的基础 URL (例如 `https://api.openai.com/v1` 或 `https://api.x.ai/v1`)。
3.  **OpenAI API Key**: 输入你的 API Key `sk-...`.
4.  **Model Name**: 输入你想使用的模型名称 (例如 `gpt-4o`, `claude-3-5-sonnet`, `xai.grok-4`). 默认为 `xai.grok-4`.
5.  **User Name**: 设置你希望 AI 如何称呼你。

## 🛠️ 技术栈

- **框架**: [Next.js 16](https://nextjs.org/) (App Router)
- **样式**: [Tailwind CSS 4](https://tailwindcss.com/)
- **图标**: [Lucide React](https://lucide.dev/)
- **状态/存储**: React Hooks & LocalStorage
- **AI 集成**: OpenAI Chat Completions API
- **多语言支持**: [中文文档](README_CN.md)

## 📄 许可证

本项目采用 MIT 许可证。详情请参阅 [LICENSE](LICENSE) 文件。

---

*Created with ❤️ by kirin L*
